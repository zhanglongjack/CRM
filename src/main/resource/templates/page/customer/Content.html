<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
		<div th:fragment="cust-info-content"  class="container-fluid">
			<script type="text/javascript">
				$(function(){
					pageQueryParams.index = '[[${pageTools.index}]]';
					pageQueryParams.pageSize = '[[${pageTools.pageSize}]]';
					pageQueryParams.total = '[[${pageTools.total}]]';
					
					$("#queryCustInfoBTN").click(function(){
						var dataParams = $("#queryFrom").serialize(); 
						pageQueryParams.fromQueryData=dataParams;
						render(pageQueryParams);  // 渲染页面函数
					});
					
					$("[data-toggle='popover']").popover();
				});
			</script>
			<h3 class="page-title">粉丝信息</h3>
			<div class="row">
				<div class="col-md-12">
					<!-- TABLE HOVER -->
					<div class="panel panel-info">
						<form class="form-inline" id="queryFrom">
							<div class="panel-body" style="border-bottom:solid #ddd 1px;">
									<div class="form-group" th:if="${session.user.isAdmin()}">
										<label>客服编号</label> 
										<input type="text" class="form-control"  placeholder="编号" name="userId" th:attr="value=${custInfo==null}?'':${custInfo.userId}">
									</div>
									<div class="form-group">
										<label>粉丝编号</label> 
										<input type="text" class="form-control"  placeholder="粉丝编号" name="custId" th:attr="value=${custInfo==null}?'':${custInfo.custId}">
									</div>
									<div class="form-group">
										<label>微信号</label> <input
											type="text" class="form-control" 
											placeholder="微信号" name="custWechatNo" th:attr="value=${custInfo==null}?'':${custInfo.custWechatNo}">
									</div>
									<div class="form-group">
										<label>姓名</label> <input type="text"
											class="form-control" 
											placeholder="姓名" name="custName" th:attr="value=${custInfo==null}?'':${custInfo.custName}">
									</div>
									<div class="form-group">
										<label>手机号</label> <input
											type="text" class="form-control" 
											placeholder="手机号" name="custPhone" th:attr="value=${custInfo==null}?'':${custInfo.custPhone}">
									</div>
									<div class="form-group">
										<label>会员等级</label>
										
											<select class="form-control" name="level">
												<option value="" >===会员等级===</option>
												<option th:each="obj :${session.levelMap}" 
														th:selected="${custInfo!=null&&custInfo.level == obj.key}" 
														th:value="${obj.key}" th:text="${obj.value}"></option>
											</select>
									</div>
							</div>
							<div class="panel-body"  style="border-bottom:solid #ddd 1px;">
									<div style="float:right;" >
										<div class="btn-group">
											<button id="queryCustInfoBTN" type="button" class="btn btn-default">
											<i class="fa fa-search"></i> 查询
											</button>
											</div>
										<div class="btn-group" style="margin:0px 5px;">
											<a class="btn btn-default" th:attr="href='/customer/primaryCustInfoModalView?modifyModel=custInfoAdd&id='" data-toggle="modal" data-target="#ModifyModal"> 
												 <span class="fa fa-plus-square"></span>&nbsp;添加粉丝
											</a>
										</div>
									</div>
							</div>
						</form>
						<table class="table table-hover" >
							<thead>
								<tr>
									<th th:if="${session.user.isAdmin()}">客服编号</th>
									<th>粉丝编号</th>
									<th width="10%">微信号</th>
									<th>姓名</th>
									<th>手机号</th>
									<th>会员等级</th>
									<th>会员余额</th>
									<th>加粉时间</th>
									<th>地址</th>
									<th>备注</th>
									<th width="12%">操作</th>
								</tr>
							</thead>
							<tbody>
								<tr th:each="obj : ${custInfoList}">
									<td th:text="${obj.userId}" th:if="${session.user.isAdmin()}"></td>
									<td th:text="${obj.custId}"></td>
									<td th:text="${obj.custWechatNo}"></td>
									<td th:text="${obj.custName}"></td>
									<td th:text="${obj.custPhone}"></td>
									<td th:text="${session.levelMap.get(obj.level)}"></td>
									<td th:text="${#numbers.formatCurrency(obj.amt)}"></td>
									<td th:text="${obj.addTime}"></td>
									<td th:text="${obj.address}" class="textOverFlowHide"
										data-container="body" data-toggle="popover"
										data-trigger="hover" data-placement="top"
										th:attr="data-content=@{${obj.address}}"></td>
									<td th:text="${obj.remark}" class="textOverFlowHide"
										data-container="body" data-toggle="popover"
										data-trigger="hover" data-placement="top"
										th:attr="data-content=@{${obj.remark}}"></td>
									<td>
										<!-- Single button -->
										<div class="btn-group">
											<a class="btn btn-default btn-sm " data-toggle="modal" data-target="#ModifyModal"
												th:attr="href='/customer/primaryCustInfoModalView?modifyModel=custInfoEdit&id='+${obj.custId}" > 
												 <span class="glyphicon glyphicon-edit"></span>&nbsp;更新
												 <i class="icon-star"></i>
											</a>
											<a class="btn btn-default btn-sm" data-toggle="modal" data-target="#ModifyModal"
												th:attr="href='/customer/primaryCustInfoModalView?modifyModel=custInfoRecharge&id='+${obj.custId}"> 
												 <span class="glyphicon glyphicon-jpy"></span>&nbsp;充值
											</a>
										</div>
									</td>
								</tr>
							</tbody>
						</table>

						<div class="panel-footer">
							<ul class="pagination" >

							</ul>
						</div>
					</div>
					<!-- END TABLE HOVER -->
				</div>
			</div>
		
		

		
		</div>
</body>
</html>